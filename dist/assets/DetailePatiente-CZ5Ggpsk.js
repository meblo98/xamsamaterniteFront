import{L as h,u as v}from"./Layout-Ds3QvfcV.js";import{p as f}from"./patienteService-aoQ1PbEG.js";import{c as m}from"./consultationService-BtuUWyoC.js";import{T as b}from"./tableau-nIdjVny8.js";import{a as A}from"./accouchementService-CuycJTc3.js";import{_ as y}from"./_plugin-vue_export-helper-Cm6_9V8g.js";import{e as r,f as g,h as p,o as a,a as s,t as o,c}from"./index-C-f7vtLL.js";const d="view",u="close",C={components:{Layout:h,Table:b},data(){return{accouchements:[],user:[],FormData:{},accouchementsColumns:[{label:"Date",field:"date"},{label:"Mode",field:"mode"},{label:"Pathologie",field:"pathologie"},{label:"Actions",field:"action",type:"action"}],patiente:{},consultations:[],rendezVous:[],consultationColumns:[{label:"Date",field:"date"},{label:"Type de rendez-vous",field:"type"},{label:"Terme",field:"terme"},{label:"Actions",field:"action",type:"action"}],rendezVousColumns:[{label:"Date",field:"date_rv"},{label:"Type de rendez-vous",field:"libelle"},{label:"Actions",field:"action",type:"action"}]}},props:{id:{type:Number,required:!0}},mounted(){this.getPatienteDetails(),this.getConsultations(),this.getRendezVous(),this.getAccouchements()},methods:{closeModal(){this.$emit("close-modal")},async getPatienteDetails(){try{const t=await f.getPatiente(this.id);this.patiente=t.patiente,this.user=this.patiente.user,this.imageUrl=v+`${this.user.photo}`}catch(t){console.error("Erreur lors de la récupération des détails de la patiente :",t)}},async getConsultations(){try{const t=await m.getConsultationsByPatiente(this.id);t&&t.consultations?(Array.isArray(t.consultations)||(t.consultations=[t.consultations]),this.consultations=t.consultations.map(e=>({id:e.id,date:e.date,type:e.visite.libelle,terme:e.terme,autre_examen:e.autre_examen,SA:e.SA,plaintes:e.plaintes,mois:e.mois,poids:e.poids,taille:e.taille,PB:e.PB,temperature:e.temperature,urine:e.urine,sucre:e.sucre,TA:e.TA,pouls:e.pouls,EG:e.EG,muqueuse:e.muqueuse,mollet:e.mollet,OMI:e.OMI,examen_seins:e.examen_seins,hu:e.hu,speculum:e.speculum,tv:e.tv,fer_ac_folique:e.fer_ac_folique,milda:e.milda,autre_traitement:e.autre_traitement,maf:e.maf,bdcf:e.bdcf,alb:e.alb,vat:e.vat,tpi:e.tpi,palpation:e.palpation,bdc:e.bdc,presentation:e.presentation,bassin:e.bassin,pelvimetre_externe:e.pelvimetre_externe,pelvimetre_interne:e.pelvimetre_interne,biischiatique:e.biischiatique,trillat:e.trillat,lign_innominees:e.lign_innominees,resultat:e.resultat,lieu_accouchement_apre_consentement:e.lieu_accouchement_apre_consentement,traitement:e.traitement,sage_femme_id:e.sage_femme_id,patiente_id:e.patiente_id,visite_id:e.visite_id}))):console.log("Aucune consultation trouvée pour cette patiente.")}catch(t){console.error("Erreur lors de la récupération des consultations :",t)}},async getRendezVous(){try{const t=await m.getRendezVousByPatiente(this.id);t&&t.mes_rv?(Array.isArray(t.mes_rv)||(t.mes_rv=[t.mes_rv]),this.rendezVous=t.mes_rv.map(e=>({id:e.id,date_rv:e.date_rv,libelle:e.visite?e.visite.libelle:"Aucun libellé",visite_id:e.visite_id}))):console.log("Aucun rendez-vous trouvé pour cette patiente.")}catch(t){console.error("Erreur lors de la récupération des rendez-vous :",t)}},async getAccouchements(){try{const t=await A.getAccouchementsByPatiente(this.id);t&&t.accouchements?this.accouchements=t.accouchements.map(e=>({date:e.date,mode:e.mode,pathologie:e.pathologie,lieu:e.lieu,heure:e.heure,terme:e.terme,mois_grossesse:e.mois_grossesse,debut_travail:e.debut_travail,perinee:e.perinee,evolution_reanimation:e.evolution_reanimation,id:e.id})):console.log("Aucun accouchement trouvé pour cette patiente.")}catch(t){console.error("Erreur lors de la récupération des accouchements :",t)}},handleAccouchementTableAction({action:t,row:e}){switch(t){case d:this.$router.push({name:"detailAccouchement",params:{id:e.id}});break;case u:this.showModal=!1;break}},handleConsultationTableAction({action:t,row:e}){switch(t){case d:this.$router.push({name:"detailConsultation",params:{id:e.id}});break;case u:this.showModal=!1;break}},handleRendezVousTableAction({action:t,row:e}){switch(t){case d:this.$router.push({name:"detailRendezVous",params:{id:e.id}});break;case u:this.showModal=!1;break}}}},T={class:"container"},z={class:"row"},M={class:"col-md-5"},k={class:"project-info-box mt-0"},w={class:"card-body text-center mb-5"},V=["src"],P={class:"mb-3 text-capitalize"},F={class:"col-md-7"},B={class:""},D={key:0},E={class:"mt-3"},x={key:0},q={class:"mt-3"},I={class:"mt-3"},R={key:0};function S(t,e,L,O,i,l){const n=p("Table"),_=p("Layout");return a(),r(_,null,{default:g(()=>[s("div",T,[s("div",z,[s("div",M,[s("div",k,[s("div",w,[s("img",{class:"img-account-profile rounded-circle mb-2",src:t.imageUrl?t.imageUrl:"/src/assets/images/women.svg",alt:"patiente"},null,8,V)]),s("h4",P,o(i.user.prenom)+" "+o(i.user.nom),1),s("p",null,"Téléphone : "+o(i.user.telephone),1),s("p",null,"Adresse : "+o(i.user.adresse),1),s("p",null,"Lieu de naissance : "+o(i.patiente.lieu_de_naissance),1),s("p",null,"Date de naissance : "+o(i.patiente.date_de_naissance),1),s("p",null,"Profession : "+o(i.patiente.profession),1),s("p",null,"Type : "+o(i.patiente.type),1)])]),s("div",F,[s("div",B,[i.rendezVous.length===0?(a(),c("div",D,e[0]||(e[0]=[s("p",null,"Aucun rendez-vous trouvé pour cette patiente.",-1)]))):(a(),r(n,{key:1,columns:i.rendezVousColumns,data:i.rendezVous,title:"Rendez-vous",type:"rendezVous",formFields:t.rendezVousFields,onAction:l.handleRendezVousTableAction,onCloseModal:l.closeModal},null,8,["columns","data","formFields","onAction","onCloseModal"]))]),s("div",E,[i.consultations.length===0?(a(),c("div",x,e[1]||(e[1]=[s("p",null,"Aucune consultation trouvée pour cette patiente.",-1)]))):(a(),r(n,{key:1,columns:i.consultationColumns,data:i.consultations,type:"consultation",title:"Consultations",formFields:t.consultationFields,onAction:l.handleConsultationTableAction,onCloseModal:l.closeModal},null,8,["columns","data","formFields","onAction","onCloseModal"]))]),s("div",q,[s("div",I,[i.accouchements.length===0?(a(),c("div",R,e[2]||(e[2]=[s("p",null,"Aucun accouchement trouvé pour cette patiente.",-1)]))):(a(),r(n,{key:1,columns:i.accouchementsColumns,data:i.accouchements,title:"Accouchements",type:"accouchement",formFields:t.accouchementFields,onAction:l.handleAccouchementTableAction,onCloseModal:l.closeModal},null,8,["columns","data","formFields","onAction","onCloseModal"]))])])])])])]),_:1})}const K=y(C,[["render",S],["__scopeId","data-v-347ee9a0"]]);export{K as default};
