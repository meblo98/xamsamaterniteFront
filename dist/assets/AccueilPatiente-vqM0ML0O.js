import{L as y}from"./Layout-BJFKaUJJ.js";import{A as C}from"./AppointmentCard-CngG0IRZ.js";import{C as A}from"./CampaignCard-BzNAcEqy.js";import{A as V,c as k}from"./conseilService-aZt-TecQ.js";import{c as w}from"./consultationService-TtmIVXSN.js";import{c as D}from"./campagneService-DYY7rWAr.js";import{_ as b,a as L}from"./_plugin-vue_export-helper-rQ_DBal5.js";import{e as l,f as B,h as c,o as s,a as o,c as n,F as d,r as m,j as u,b as _,g as S}from"./index-1QRIi6KU.js";const x={components:{Layout:y,AppointmentCard:C,CampaignCard:A,AdviceVideo:V},data(){return{rv:[],campaigns:[],adviceVideos:[]}},mounted(){this.fetchAppointments(),this.fetchCampaigns(),this.fetchConseil()},methods:{async fetchAppointments(){try{const r=(await L.getUser()).profil.id,i=await w.getRendezVousByPatiente(r);i.mes_rv&&!Array.isArray(i.mes_rv)?this.rv=[i.mes_rv]:this.rv=i.mes_rv}catch(e){console.error("Erreur lors de la récupération des rendez-vous :",e)}},async fetchCampaigns(){try{const e=await D.getCampagnes();this.campaigns=e}catch(e){console.error("Erreur lors de la récupération des campagnes:",e)}},async fetchConseil(){try{const e=await k.getConseils();this.adviceVideos=e.data}catch(e){console.error("Erreur lors de la récupération des conseil:",e)}},formatDate(e){const r={year:"numeric",month:"long",day:"numeric"};return new Date(e).toLocaleDateString("fr-FR",r)}}},z={class:"appointment"},E={class:"appointment-cards"},I={key:0},N={key:1},F={class:"campaigns"},P={class:"campaign-cards"},R={key:0},j={class:"advice"},T={class:"advice-videos"},U={key:0};function q(e,r,i,G,a,p){const h=c("AppointmentCard"),v=c("CampaignCard"),g=c("AdviceVideo"),f=c("Layout");return s(),l(f,null,{default:B(()=>[o("section",z,[r[0]||(r[0]=o("h2",null,"Prochains rendez-vous",-1)),o("div",E,[a.rv&&a.rv.length>0?(s(),n("div",I,[(s(!0),n(d,null,m(a.rv.slice(0,2),t=>(s(),n("div",{key:t.id,class:"appointment-card-wrapper w-100"},[S(h,{date:p.formatDate(t.date_rv),type:t.visite.libelle},null,8,["date","type"])]))),128))])):(s(),n("p",N,"Aucun rendez-vous disponible pour le moment."))])]),o("section",F,[r[1]||(r[1]=o("h2",null,[u("Campagnes "),o("a",{href:"#"},"Voir toutes")],-1)),o("div",P,[a.campaigns.length===0?(s(),n("p",R," Aucune campagne disponible pour le moment. ")):_("",!0),(s(!0),n(d,null,m(a.campaigns.slice(0,4),t=>(s(),l(v,{image:t.image?e.urlImage+t.image:"/src/assets/images/women.svg",key:t.id,title:t.nom,date:p.formatDate(t.date_debut),location:t.lieu,campagneId:t.id},null,8,["image","title","date","location","campagneId"]))),128))])]),o("section",j,[r[2]||(r[2]=o("h2",null,[u("Conseils "),o("a",{href:"#"},"Voir tous")],-1)),o("div",T,[a.adviceVideos.length===0?(s(),n("p",U," Aucun conseil disponible pour le moment. ")):_("",!0),(s(!0),n(d,null,m(a.adviceVideos.slice(0,4),t=>(s(),l(g,{key:t.id,image:t.image},null,8,["image"]))),128))])])]),_:1})}const Y=b(x,[["render",q]]);export{Y as default};
