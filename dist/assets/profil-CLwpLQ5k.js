import{_ as a,a as d}from"./_plugin-vue_export-helper-rQ_DBal5.js";import{L as m,u as f}from"./Layout-BJFKaUJJ.js";import{S as u}from"./sweetalert2.all-BmwYcicJ.js";import{e as c,f as v,h,o as b,a as o,w,d as t,v as i}from"./index-1QRIi6KU.js";const x={components:{Layout:m},data(){return{profile:{prenom:"",nom:"",email:"",telephone:"",adresse:"",old_password:"",password:"",photo:null},selectedFile:null}},methods:{async fetchProfile(){try{const e=(await d.getUser()).user;e&&(this.profile.prenom=e.prenom,this.profile.nom=e.nom,this.profile.email=e.email,this.profile.telephone=e.telephone,this.profile.adresse=e.adresse,this.imageUrl=f+`${e.photo}`)}catch(l){console.error("Erreur lors de la récupération des données utilisateur",l)}},handleFileUpload(l){this.selectedFile=l.target.files[0]},async submitForm(){const l=new FormData;l.append("prenom",this.profile.prenom),l.append("nom",this.profile.nom),l.append("email",this.profile.email),l.append("telephone",this.profile.telephone),l.append("adresse",this.profile.adresse),l.append("old_password",this.profile.old_password),l.append("password",this.profile.password),this.selectedFile&&l.append("photo",this.selectedFile);try{await d.profil(l),u.fire({title:"Succès!",text:"Profil mis à jour avec succès !",icon:"success",timer:1e3})}catch(e){console.error("Erreur lors de la mise à jour du profil:",e)}}},mounted(){this.fetchProfile()}},y={class:"container-xl px-4 mt-4"},_={class:"row"},g={class:"col-xl-4"},U={class:"card mb-4 mb-xl-0"},E={class:"card-body text-center"},F=["src"],P={class:"col-xl-8"},V={class:"card mb-4"},z={class:"card-body"},N={class:"row gx-3 mb-3"},D={class:"col-md-6"},S={class:"col-md-6"},L={class:"row gx-3 mb-3"},B={class:"col-md-6"},C={class:"col-md-6"},I={class:"mb-3"},M={class:"row gx-3 mb-3"},j={class:"col-md-6"},k={class:"col-md-6"};function A(l,e,G,T,r,n){const p=h("Layout");return b(),c(p,null,{default:v(()=>[o("div",y,[o("div",_,[o("div",g,[o("div",U,[e[10]||(e[10]=o("div",{class:"card-header"},"Image du profil",-1)),o("div",E,[o("img",{class:"img-account-profile rounded-circle mb-2",src:l.imageUrl,alt:"Profile Image"},null,8,F),e[9]||(e[9]=o("div",{class:"small font-italic text-muted mb-4"}," JPG ou PNG d'une taille maximale de 5 Mo ",-1)),o("input",{type:"file",onChange:e[0]||(e[0]=(...s)=>n.handleFileUpload&&n.handleFileUpload(...s))},null,32)])])]),o("div",P,[o("div",V,[e[19]||(e[19]=o("div",{class:"card-header"},"Détails du compte",-1)),o("div",z,[o("form",{onSubmit:e[8]||(e[8]=w((...s)=>n.submitForm&&n.submitForm(...s),["prevent"]))},[o("div",N,[o("div",D,[e[11]||(e[11]=o("label",{class:"small mb-1",for:"prenom"},"Prenom",-1)),t(o("input",{class:"form-control",id:"prenom","onUpdate:modelValue":e[1]||(e[1]=s=>r.profile.prenom=s),type:"text",placeholder:"Entrez votre prénom"},null,512),[[i,r.profile.prenom]])]),o("div",S,[e[12]||(e[12]=o("label",{class:"small mb-1",for:"nom"},"Nom",-1)),t(o("input",{class:"form-control",id:"nom","onUpdate:modelValue":e[2]||(e[2]=s=>r.profile.nom=s),type:"text",placeholder:"Entrez votre nom"},null,512),[[i,r.profile.nom]])])]),o("div",L,[o("div",B,[e[13]||(e[13]=o("label",{class:"small mb-1",for:"telephone"},"Téléphone",-1)),t(o("input",{class:"form-control",id:"telephone","onUpdate:modelValue":e[3]||(e[3]=s=>r.profile.telephone=s),type:"text",placeholder:"Entrez votre téléphone"},null,512),[[i,r.profile.telephone]])]),o("div",C,[e[14]||(e[14]=o("label",{class:"small mb-1",for:"adresse"},"Adresse",-1)),t(o("input",{class:"form-control",id:"adresse","onUpdate:modelValue":e[4]||(e[4]=s=>r.profile.adresse=s),type:"text",placeholder:"Entrez votre adresse"},null,512),[[i,r.profile.adresse]])])]),o("div",I,[e[15]||(e[15]=o("label",{class:"small mb-1",for:"email"},"Email",-1)),t(o("input",{class:"form-control",id:"email","onUpdate:modelValue":e[5]||(e[5]=s=>r.profile.email=s),type:"email",placeholder:"Entrez votre email"},null,512),[[i,r.profile.email]])]),o("div",M,[o("div",j,[e[16]||(e[16]=o("label",{class:"small mb-1",for:"old_password"},"Ancien mot de passe",-1)),t(o("input",{class:"form-control",id:"old_password","onUpdate:modelValue":e[6]||(e[6]=s=>r.profile.old_password=s),type:"password",placeholder:"Entrez votre ancien mot de passe"},null,512),[[i,r.profile.old_password]])]),o("div",k,[e[17]||(e[17]=o("label",{class:"small mb-1",for:"inputNewPassword"},"Nouveau mot de passe",-1)),t(o("input",{class:"form-control",id:"inputNewPassword","onUpdate:modelValue":e[7]||(e[7]=s=>r.profile.password=s),type:"password",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[i,r.profile.password]])])]),e[18]||(e[18]=o("button",{class:"btn btn-primary",type:"submit"}," Enregistrer les changements ",-1))],32)])])])])])]),_:1})}const O=a(x,[["render",A]]);export{O as default};
