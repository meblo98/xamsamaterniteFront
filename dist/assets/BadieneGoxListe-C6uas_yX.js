import{L as b}from"./Layout-Ds3QvfcV.js";import{T as x}from"./tableau-nIdjVny8.js";import{P as y}from"./pagination-B0tE2wTz.js";import{S as r}from"./sweetalert2.all-BXtj_mcp.js";import{b as m}from"./badieneGoxService-B0c3JR-3.js";import{e as P,f as G,h as u,o as p,c,a as o,d as l,v as i,g as B}from"./index-C-f7vtLL.js";import{_ as w}from"./_plugin-vue_export-helper-Cm6_9V8g.js";const v={components:{Layout:b,Table:x,Pagination:y},data(){return{allData:[],newBadiene:{nom:"",prenom:"",adresse:"",telephone:"",email:""},columns:[{label:"Nom",field:"nom"},{label:"Prénom",field:"prenom"},{label:"Téléphone",field:"telephone"},{label:"Adresse",field:"adresse"},{label:"Actions",field:"action",type:"action"}],formFields:[{name:"prenom",id:"prenom",label:"Prénom",type:"text",placeholder:"Entrez le prénom"},{name:"nom",label:"Nom",type:"text",placeholder:"Entrez le nom"},{name:"adresse",label:"Adresse",type:"text",placeholder:"Entrez l'adresse"},{name:"email",label:"Email",type:"email",placeholder:"Entrez l'email"},{name:"telephone",label:"Téléphone",type:"text",placeholder:"Entrez le numéro de téléphone"}],paginatedData:[],currentPage:1,totalItems:0,itemsPerPage:10}},mounted(){this.getBadienes()},methods:{async getBadienes(){try{const t=await m.getBadieneGoxes();t&&t.Liste_BadieneGox&&Array.isArray(t.Liste_BadieneGox)&&(this.allData=t.Liste_BadieneGox.map(e=>({id:e.id,nom:e.user.nom,prenom:e.user.prenom,telephone:e.user.telephone,adresse:e.user.adresse,email:e.user.email})),this.totalItems=this.allData.length,this.getPatientsPaginated())}catch(t){console.error("Erreur lors de la récupération des Badiene Gox :",t)}},getPatientsPaginated(){const t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;this.paginatedData=this.allData.slice(t,e)},handlePageChange(t){this.currentPage=t,this.getPatientsPaginated()},async addBadiene(t=null){const e=t;if(!e.nom||!e.prenom||!e.telephone||!e.email||!e.adresse){r.fire({icon:"error",title:"Erreur",text:"Tous les champs sont requis."});return}try{await m.createBadieneGox(e),this.getBadienes(),this.resetBadiene(),r.fire({icon:"success",title:"Ajout réussi",showConfirmButton:!1,timer:1500})}catch(d){r.fire({icon:"error",title:"Erreur lors de l'ajout",text:"Veuillez vérifier les données saisies."}),console.error("Erreur lors de l'ajout:",d)}},resetBadiene(){this.newBadiene={nom:"",prenom:"",adresse:"",telephone:"",email:""}},async editBadiene(t){try{await m.updateBadieneGox(t.id,t),this.getBadienes(),r.fire({title:"Badiene Gox mise à jour avec succès !",icon:"success",timer:1e3})}catch(e){console.error("Erreur lors de la modification de la Badiene Gox :",e),r.fire({title:"Erreur lors de la mise à jour de la Badiene Gox !",icon:"error",timer:1e3})}},async deleteBadiene(t){r.fire({title:"Êtes-vous sûr de vouloir supprimer cette Badiene Gox ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(async e=>{if(e.isConfirmed)try{await m.deleteBadieneGox(t),this.getBadienes(),r.fire({title:"Badiene Gox supprimée avec succès !",icon:"success",timer:1e3})}catch(d){console.error("Erreur lors de la suppression de la Badiene Gox :",d),r.fire({title:"Erreur lors de la suppression de la Badiene Gox !",icon:"error",timer:1e3})}})},async handleTableAction(t){t.action==="edit"?this.editBadiene(t.row):t.action==="delete"&&this.deleteBadiene(t.row.id)}}},D={key:0},A={class:"modal fade",id:"ajoutBadiene","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},E={class:"modal-dialog"},T={class:"modal-content"},_={class:"modal-body"},k={class:"form-group"},z={class:"form-group"},C={class:"form-group"},L={class:"form-group"},j={class:"form-group"},V={class:"modal-footer"},F={key:1,class:"tableau"};function I(t,e,d,N,a,s){const f=u("Table"),g=u("Pagination"),h=u("Layout");return p(),P(h,null,{default:G(()=>[a.allData.length===0?(p(),c("div",D,[e[13]||(e[13]=o("button",{type:"button",class:"btn","data-bs-toggle":"modal","data-bs-target":"#ajoutBadiene",style:{"background-color":"#6932f9",color:"white",border:"none",padding:"5px","margin-bottom":"10px",cursor:"pointer"}}," Ajouter une Badiene Gox ",-1)),o("div",A,[o("div",E,[o("div",T,[e[12]||(e[12]=o("div",{class:"modal-header"},[o("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"}," Ajouter une Badiene Gox "),o("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),o("div",_,[o("div",k,[e[6]||(e[6]=o("label",{for:"prenom"},"Prénom de la Badiene Gox",-1)),l(o("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>a.newBadiene.prenom=n),type:"text",class:"form-control",id:"prenom",placeholder:"Donnez le prénom"},null,512),[[i,a.newBadiene.prenom]])]),o("div",z,[e[7]||(e[7]=o("label",{for:"nom"},"Nom de la Badiene Gox",-1)),l(o("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>a.newBadiene.nom=n),type:"text",class:"form-control",id:"nom",placeholder:"Donnez le nom"},null,512),[[i,a.newBadiene.nom]])]),o("div",C,[e[8]||(e[8]=o("label",{for:"telephone"},"Téléphone de la Badiene Gox",-1)),l(o("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>a.newBadiene.telephone=n),type:"number",class:"form-control",id:"telephone",placeholder:"Donnez le numéro de téléphone"},null,512),[[i,a.newBadiene.telephone]])]),o("div",L,[e[9]||(e[9]=o("label",{for:"email"},"Email de la Badiene Gox",-1)),l(o("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>a.newBadiene.email=n),type:"email",class:"form-control",id:"email",placeholder:"Donnez l'email"},null,512),[[i,a.newBadiene.email]])]),o("div",j,[e[10]||(e[10]=o("label",{for:"adresse"},"Adresse de la Badiene Gox",-1)),l(o("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>a.newBadiene.adresse=n),type:"text",class:"form-control",id:"adresse",placeholder:"Donnez l'adresse"},null,512),[[i,a.newBadiene.adresse]])])]),o("div",V,[o("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=n=>s.addBadiene(t.data))}," Ajouter "),e[11]||(e[11]=o("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Fermer ",-1))])])])]),e[14]||(e[14]=o("p",null,"Aucune Badiene Gox trouvée.",-1))])):(p(),c("div",F,[B(f,{columns:a.columns,data:a.paginatedData,title:"Liste des Badiene Gox",formFields:a.formFields,onAction:s.handleTableAction,onAddData:s.addBadiene,onEditData:s.editBadiene},null,8,["columns","data","formFields","onAction","onAddData","onEditData"]),B(g,{currentPage:a.currentPage,totalItems:a.totalItems,itemsPerPage:a.itemsPerPage,onPageChanged:s.handlePageChange},null,8,["currentPage","totalItems","itemsPerPage","onPageChanged"])]))]),_:1})}const K=w(v,[["render",I]]);export{K as default};
