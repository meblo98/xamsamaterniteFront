import{L as x}from"./Layout-BJFKaUJJ.js";import{T as b}from"./tableau-BdoqOBfb.js";import{P as y}from"./pagination-DBVhxEhs.js";import{S as r}from"./sweetalert2.all-BmwYcicJ.js";import{b as d}from"./badieneGoxService-qMzcqQAj.js";import{e as P,f as w,h as m,o as u,c,a as t,d as l,v as i,g as B}from"./index-1QRIi6KU.js";import{_ as G}from"./_plugin-vue_export-helper-rQ_DBal5.js";const v={components:{Layout:x,Table:b,Pagination:y},data(){return{allData:[],newBadiene:{nom:"",prenom:"",adresse:"",telephone:"",email:""},columns:[{label:"Nom",field:"nom"},{label:"Prénom",field:"prenom"},{label:"Téléphone",field:"telephone"},{label:"Adresse",field:"adresse"},{label:"Actions",field:"action",type:"action"}],formFields:[{name:"prenom",id:"prenom",label:"Prénom",type:"text",placeholder:"Entrez le prénom"},{name:"nom",label:"Nom",type:"text",placeholder:"Entrez le nom"},{name:"adresse",label:"Adresse",type:"text",placeholder:"Entrez l'adresse"},{name:"email",label:"Email",type:"email",placeholder:"Entrez l'email"},{name:"telephone",label:"Téléphone",type:"text",placeholder:"Entrez le numéro de téléphone"}],paginatedData:[],currentPage:1,totalItems:0,itemsPerPage:10}},mounted(){this.getBadienes()},methods:{async getBadienes(){try{const o=await d.getBadieneGoxes();o&&o.Liste_BadieneGox&&Array.isArray(o.Liste_BadieneGox)&&(this.allData=o.Liste_BadieneGox.map(e=>({id:e.id,nom:e.user.nom,prenom:e.user.prenom,telephone:e.user.telephone,adresse:e.user.adresse,email:e.user.email})),this.totalItems=this.allData.length,this.getPatientsPaginated())}catch(o){console.error("Erreur lors de la récupération des Badiene Gox :",o)}},getPatientsPaginated(){const o=(this.currentPage-1)*this.itemsPerPage,e=o+this.itemsPerPage;this.paginatedData=this.allData.slice(o,e)},handlePageChange(o){this.currentPage=o,this.getPatientsPaginated()},async addBadiene(o){if(!o.nom||!o.prenom||!o.telephone||!o.email||!o.adresse){r.fire({icon:"error",title:"Erreur",text:"Tous les champs sont requis."});return}try{await d.createBadieneGox(o),this.getBadienes(),this.resetBadiene(),r.fire({icon:"success",title:"Ajout réussi",showConfirmButton:!1,timer:1500})}catch(e){r.fire({icon:"error",title:"Erreur lors de l'ajout",text:"Veuillez vérifier les données saisies."}),console.error("Erreur lors de l'ajout:",e)}},resetBadiene(){this.newBadiene={nom:"",prenom:"",adresse:"",telephone:"",email:""}},async editBadiene(o){try{await d.updateBadieneGox(o.id,o),this.getBadienes(),r.fire({title:"Badiene Gox mise à jour avec succès !",icon:"success",timer:1e3})}catch(e){console.error("Erreur lors de la modification de la Badiene Gox :",e),r.fire({title:"Erreur lors de la mise à jour de la Badiene Gox !",icon:"error",timer:1e3})}},async deleteBadiene(o){r.fire({title:"Êtes-vous sûr de vouloir supprimer cette Badiene Gox ?",icon:"warning",showCancelButton:!0,confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(async e=>{if(e.isConfirmed)try{await d.deleteBadieneGox(o),this.getBadienes(),r.fire({title:"Badiene Gox supprimée avec succès !",icon:"success",timer:1e3})}catch(p){console.error("Erreur lors de la suppression de la Badiene Gox :",p),r.fire({title:"Erreur lors de la suppression de la Badiene Gox !",icon:"error",timer:1e3})}})},async handleTableAction(o){o.action==="edit"?this.editBadiene(o.row):o.action==="delete"&&this.deleteBadiene(o.row.id)}}},A={key:0},E={class:"modal fade",id:"ajoutBadiene","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},D={class:"modal-dialog"},T={class:"modal-content"},_={class:"modal-body"},k={class:"form-group"},z={class:"form-group"},C={class:"form-group"},L={class:"form-group"},j={class:"form-group"},V={class:"modal-footer"},F={key:1,class:"tableau"};function I(o,e,p,N,n,s){const f=m("Table"),g=m("Pagination"),h=m("Layout");return u(),P(h,null,{default:w(()=>[n.allData.length===0?(u(),c("div",A,[e[13]||(e[13]=t("button",{type:"button",class:"btn","data-bs-toggle":"modal","data-bs-target":"#ajoutBadiene",style:{"background-color":"#6932f9",color:"white",border:"none",padding:"5px","margin-bottom":"10px",cursor:"pointer"}}," Ajouter une Badiene Gox ",-1)),t("div",E,[t("div",D,[t("div",T,[e[12]||(e[12]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"}," Ajouter une Badiene Gox "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",_,[t("div",k,[e[6]||(e[6]=t("label",{for:"prenom"},"Prénom de la Badiene Gox",-1)),l(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.newBadiene.prenom=a),type:"text",class:"form-control",id:"prenom",placeholder:"Donnez le prénom"},null,512),[[i,n.newBadiene.prenom]])]),t("div",z,[e[7]||(e[7]=t("label",{for:"nom"},"Nom de la Badiene Gox",-1)),l(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.newBadiene.nom=a),type:"text",class:"form-control",id:"nom",placeholder:"Donnez le nom"},null,512),[[i,n.newBadiene.nom]])]),t("div",C,[e[8]||(e[8]=t("label",{for:"telephone"},"Téléphone de la Badiene Gox",-1)),l(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.newBadiene.telephone=a),type:"number",class:"form-control",id:"telephone",placeholder:"Donnez le numéro de téléphone"},null,512),[[i,n.newBadiene.telephone]])]),t("div",L,[e[9]||(e[9]=t("label",{for:"email"},"Email de la Badiene Gox",-1)),l(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.newBadiene.email=a),type:"email",class:"form-control",id:"email",placeholder:"Donnez l'email"},null,512),[[i,n.newBadiene.email]])]),t("div",j,[e[10]||(e[10]=t("label",{for:"adresse"},"Adresse de la Badiene Gox",-1)),l(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>n.newBadiene.adresse=a),type:"text",class:"form-control",id:"adresse",placeholder:"Donnez l'adresse"},null,512),[[i,n.newBadiene.adresse]])])]),t("div",V,[t("button",{class:"btn btn-primary",onClick:e[5]||(e[5]=a=>s.addBadiene(n.newBadiene))}," Ajouter "),e[11]||(e[11]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Fermer ",-1))])])])]),e[14]||(e[14]=t("p",null,"Aucune Badiene Gox trouvée.",-1))])):(u(),c("div",F,[B(f,{columns:n.columns,data:n.paginatedData,title:"Liste des Badiene Gox",formFields:n.formFields,onAction:s.handleTableAction,onAddData:s.addBadiene,onEditData:s.editBadiene},null,8,["columns","data","formFields","onAction","onAddData","onEditData"]),B(g,{currentPage:n.currentPage,totalItems:n.totalItems,itemsPerPage:n.itemsPerPage,onPageChanged:s.handlePageChange},null,8,["currentPage","totalItems","itemsPerPage","onPageChanged"])]))]),_:1})}const K=G(v,[["render",I]]);export{K as default};
