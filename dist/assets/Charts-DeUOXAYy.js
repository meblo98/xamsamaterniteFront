import{a as p}from"./accouchementService-Bj80xzyE.js";import{c as _}from"./consultationService-TtmIVXSN.js";import{p as d}from"./patienteService-DVT1O5ON.js";import{_ as m}from"./_plugin-vue_export-helper-rQ_DBal5.js";import{o as r,c as l,F as v,r as b,a as i,t as h,g as u,h as f}from"./index-1QRIi6KU.js";const g={data(){return{stats:[{icon:"üè•",value:0,label:"Consultations d'aujourd'hui"},{icon:"üè®",value:0,label:"Accouchements dans le mois"},{icon:"ü§∞",value:0,label:"Patientes dans le poste"}]}},async mounted(){await this.consultations(),await this.accouchements(),await this.patientes()},methods:{async consultations(){const e=await _.getConsultations()||[];this.calculateDailyConsultations(e)},calculateDailyConsultations(s){const e=new Date().toISOString().split("T")[0],a=s.filter(o=>o.date===e).length;this.stats[0].value=a},async accouchements(){const e=(await p.getAccouchements()).accouchements||[];this.calculateMonthlyAccoucchements(e)},calculateMonthlyAccoucchements(s){const e=new Date().toISOString().split("T")[0].slice(0,7),a=s.filter(o=>o.date.slice(0,7)===e).length;this.stats[1].value=a},async patientes(){const e=(await d.getPatientes()).Liste_des_patientes||[];this.calculatePatientes(e)},calculatePatientes(s){const e=s.length;this.stats[2].value=e}}},C={class:"dashboard-stats"},S={class:"icon m-3"},w={class:"details m-2"};function x(s,e,a,o,t,c){return r(),l("div",C,[(r(!0),l(v,null,b(t.stats,(n,y)=>(r(),l("div",{class:"stat-card w-100 m-3 d-flex",key:y},[i("div",S,h(n.icon),1),i("div",w,[i("h4",null,h(n.value),1),i("p",null,h(n.label),1)])]))),128))])}const J=m(g,[["render",x]]),O={data(){return{patientsChartOptions:{animationEnabled:!0,exportEnabled:!0,title:{text:"Fr√©quence des patientes par mois"},axisX:{title:"Mois ‚ü∂"},axisY:{title:"Nombre ‚ü∂"},data:[{type:"spline",dataPoints:[]}]},deliveriesChartOptions:{animationEnabled:!0,exportEnabled:!0,title:{text:"Fr√©quence des accouchements par mois"},axisX:{title:"Mois ‚ü∂"},axisY:{title:"Nombre ‚ü∂"},data:[{type:"spline",dataPoints:[]}]},styleOptions:{width:"100%",height:"360px"}}},methods:{async patienteStat(){try{const a=(await d.getPatientes()).Liste_des_patientes.reduce((t,c)=>{const n=new Date(c.created_at).getMonth()+1;return t[n]||(t[n]=0),t[n]++,t},{}),o=Object.keys(a).map(t=>({label:this.getMonthLabel(t),y:a[t]}));this.patientsChartOptions.data[0].dataPoints=o}catch{}},async accouchementStat(){try{const a=(await p.getAccouchements()).accouchements.reduce((t,c)=>{const n=new Date(c.created_at).getMonth()+1;return t[n]||(t[n]=0),t[n]++,t},{}),o=Object.keys(a).map(t=>({label:this.getMonthLabel(t),y:a[t]}));this.deliveriesChartOptions.data[0].dataPoints=o}catch{}},getMonthLabel(s){return["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"][s-1]}},mounted(){this.patienteStat(),this.accouchementStat()}},D={class:"charts"},M={class:"chart"},P={class:"chart"};function A(s,e,a,o,t,c){const n=f("CanvasJSChart");return r(),l("div",D,[i("div",M,[e[0]||(e[0]=i("h3",null,"Fr√©quence des patientes en fonction des mois",-1)),u(n,{options:t.patientsChartOptions,styles:t.styleOptions},null,8,["options","styles"])]),i("div",P,[e[1]||(e[1]=i("h3",null,"Fr√©quence des accouchements en fonction des mois",-1)),u(n,{options:t.deliveriesChartOptions,styles:t.styleOptions},null,8,["options","styles"])])])}const N=m(O,[["render",A]]);export{N as C,J as D};
