import{a as p}from"./accouchementService-CuycJTc3.js";import{c as _}from"./consultationService-BtuUWyoC.js";import{p as d}from"./patienteService-aoQ1PbEG.js";import{_ as m}from"./_plugin-vue_export-helper-Cm6_9V8g.js";import{o as r,c as l,F as v,r as b,a as i,t as u,g as h,h as C}from"./index-C-f7vtLL.js";const f={data(){return{stats:[],dailyConsultations:0}},async mounted(){await this.consultations(),await this.accouchements(),await this.patientes()},methods:{async consultations(){const e=await _.getConsultations();this.calculateDailyConsultations(e)},calculateDailyConsultations(s){const e=new Date().toISOString().split("T")[0],a=s.filter(o=>o.date===e).length;this.stats.push({icon:"üè•",value:a,label:"Consultations d'aujourd'hui"})},async accouchements(){const e=(await p.getAccouchements()).accouchements;await this.calculateMonthlyAccoucchements(e)},async calculateMonthlyAccoucchements(s){const e=new Date().toISOString().split("T")[0].slice(0,7),a=s.filter(o=>o.date.slice(0,7)===e).length;this.stats.push({icon:"üè®",value:a,label:"Accouchements dans le mois"})},async patientes(){const e=(await d.getPatientes()).Liste_des_patientes;await this.calculePatiente(e)},async calculePatiente(s){const e=s.length;this.stats.push({icon:"ü§∞",value:e,label:"Patientes dans le poste"})}}},g={class:"dashboard-stats"},w={class:"icon m-3"},S={class:"details m-2"};function x(s,e,a,o,t,c){return r(),l("div",g,[(r(!0),l(v,null,b(t.stats,(n,y)=>(r(),l("div",{class:"stat-card w-100 m-3 d-flex",key:y},[i("div",w,u(n.icon),1),i("div",S,[i("h4",null,u(n.value),1),i("p",null,u(n.label),1)])]))),128))])}const k=m(f,[["render",x]]),O={data(){return{patientsChartOptions:{animationEnabled:!0,exportEnabled:!0,title:{text:"Fr√©quence des patientes par mois"},axisX:{title:"Mois ‚ü∂"},axisY:{title:"Nombre ‚ü∂"},data:[{type:"spline",dataPoints:[]}]},deliveriesChartOptions:{animationEnabled:!0,exportEnabled:!0,title:{text:"Fr√©quence des accouchements par mois"},axisX:{title:"Mois ‚ü∂"},axisY:{title:"Nombre ‚ü∂"},data:[{type:"spline",dataPoints:[]}]},styleOptions:{width:"100%",height:"360px"}}},methods:{async patienteStat(){try{const a=(await d.getPatientes()).Liste_des_patientes.reduce((t,c)=>{const n=new Date(c.created_at).getMonth()+1;return t[n]||(t[n]=0),t[n]++,t},{}),o=Object.keys(a).map(t=>({label:this.getMonthLabel(t),y:a[t]}));this.patientsChartOptions.data[0].dataPoints=o}catch(s){console.error("Erreur lors de la r√©cup√©ration des statistiques des patientes:",s)}},async accouchementStat(){try{const a=(await p.getAccouchements()).accouchements.reduce((t,c)=>{const n=new Date(c.created_at).getMonth()+1;return t[n]||(t[n]=0),t[n]++,t},{}),o=Object.keys(a).map(t=>({label:this.getMonthLabel(t),y:a[t]}));this.deliveriesChartOptions.data[0].dataPoints=o}catch(s){console.error("Erreur lors de la r√©cup√©ration des statistiques des accouchements:",s)}},getMonthLabel(s){return["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"][s-1]}},mounted(){this.patienteStat(),this.accouchementStat()}},D={class:"charts"},M={class:"chart"},P={class:"chart"};function A(s,e,a,o,t,c){const n=C("CanvasJSChart");return r(),l("div",D,[i("div",M,[e[0]||(e[0]=i("h3",null,"Fr√©quence des patientes en fonction des mois",-1)),h(n,{options:t.patientsChartOptions,styles:t.styleOptions},null,8,["options","styles"])]),i("div",P,[e[1]||(e[1]=i("h3",null,"Fr√©quence des accouchements en fonction des mois",-1)),h(n,{options:t.deliveriesChartOptions,styles:t.styleOptions},null,8,["options","styles"])])])}const J=m(O,[["render",A]]);export{J as C,k as D};
